<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Doctor Dashboard Test</title>
  <link rel="stylesheet" href="css/staff.css" />
  <style>
    .test-section {
      background: white;
      padding: 2rem;
      margin: 2rem;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }
    .test-result {
      padding: 1rem;
      margin: 1rem 0;
      border-radius: 5px;
      font-weight: bold;
    }
    .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    .warning { background-color: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
    .btn-group {
      display: flex;
      gap: 1rem;
      margin: 1rem 0;
      flex-wrap: wrap;
    }
    .btn {
      padding: 0.5rem 1rem;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }
    .btn-primary { background: #007bff; color: white; }
    .btn-success { background: #28a745; color: white; }
    .btn-warning { background: #ffc107; color: #212529; }
    .btn-danger { background: #dc3545; color: white; }
    .btn:hover { opacity: 0.8; }
  </style>
</head>
<body>
  <div class="test-section">
    <h1>Doctor Dashboard Test</h1>
    
    <div class="test-result success">
      ✅ Doctor Dashboard created with all requested features
    </div>
    
    <div class="test-result info">
      ℹ️ Uses shared staff.js and staff.css for consistent functionality
    </div>
    
    <div class="test-result info">
      ℹ️ Local storage integration for data persistence
    </div>
    
    <h3>Features Implemented:</h3>
    <ul>
      <li>✅ <strong>Today's Appointments:</strong> View and manage today's patient appointments</li>
      <li>✅ <strong>Future Appointments:</strong> View upcoming patient appointments</li>
      <li>✅ <strong>Prescription Report:</strong> Manage patient prescriptions with notes and medicines</li>
      <li>✅ <strong>Lab Report:</strong> Manage laboratory test requests with detailed notes</li>
      <li>✅ <strong>Edit Features:</strong> Full CRUD operations for prescriptions and lab reports</li>
      <li>✅ <strong>Patient ID Sorting:</strong> Prescriptions sorted by patient ID</li>
      <li>✅ <strong>Search & Filter:</strong> Advanced search and filtering capabilities</li>
      <li>✅ <strong>Local Storage:</strong> Data persistence across sessions</li>
      <li>✅ <strong>Modal Forms:</strong> Clean modal interfaces for data entry</li>
      <li>✅ <strong>Status Management:</strong> Track status of appointments, prescriptions, and lab reports</li>
    </ul>
    
    <h3>Dashboard Sections:</h3>
    <ol>
      <li><strong>Today's Appointments:</strong>
        <ul>
          <li>Shows appointments scheduled for today</li>
          <li>Search by patient name or ID</li>
          <li>Filter by appointment status</li>
          <li>Actions: View patient details, Add prescription, Add lab report</li>
        </ul>
      </li>
      <li><strong>Future Appointments:</strong>
        <ul>
          <li>Shows upcoming appointments</li>
          <li>Search and filter functionality</li>
          <li>Same action buttons as today's appointments</li>
        </ul>
      </li>
      <li><strong>Prescription Report:</strong>
        <ul>
          <li>Sorted by Patient ID</li>
          <li>Medical notes and medicine prescriptions</li>
          <li>Add, edit, and delete functionality</li>
          <li>Filter by date (today, week, month)</li>
        </ul>
      </li>
      <li><strong>Lab Report:</strong>
        <ul>
          <li>Detailed lab test requests</li>
          <li>Test type selection (Blood, Urine, X-Ray, ECG, etc.)</li>
          <li>Priority levels (Normal, Urgent, Emergency)</li>
          <li>Add, edit, and delete functionality</li>
        </ul>
      </li>
    </ol>
    
    <h3>Data Structure:</h3>
    <div style="background: #f8f9fa; padding: 1rem; border-radius: 5px; margin: 1rem 0;">
      <strong>Prescription Data:</strong><br>
      - Patient ID, Patient Name, Date, Status<br>
      - Medical Notes (diagnosis, observations)<br>
      - Medicines (dosage, instructions)<br>
      - Doctor ID, Created/Updated timestamps<br><br>
      
      <strong>Lab Report Data:</strong><br>
      - Patient ID, Patient Name, Date, Status<br>
      - Test Type, Priority Level<br>
      - Test Notes (detailed requirements)<br>
      - Doctor ID, Created/Updated timestamps
    </div>
    
    <h3>Test Controls:</h3>
    <div class="btn-group">
      <button onclick="addSampleData()" class="btn btn-success">Add Sample Data</button>
      <button onclick="clearAllData()" class="btn btn-danger">Clear All Data</button>
      <button onclick="openDoctorDashboard()" class="btn btn-primary">Open Doctor Dashboard</button>
    </div>
    
    <h3>How to Test:</h3>
    <ol>
      <li>Click "Add Sample Data" to populate with test data</li>
      <li>Click "Open Doctor Dashboard" to access the dashboard</li>
      <li>Navigate between different sections</li>
      <li>Test search and filter functionality</li>
      <li>Add new prescriptions and lab reports</li>
      <li>Edit existing records</li>
      <li>Delete records to test CRUD operations</li>
      <li>Refresh the page to verify data persistence</li>
    </ol>
    
    <p><strong>Note:</strong> The doctor dashboard integrates seamlessly with the existing patient data from the receptionist dashboard and provides comprehensive medical record management capabilities.</p>
  </div>
  
  <script>
    function addSampleData() {
      // Add sample patient data
      const samplePatients = [
        {
          id: 'PAT0001',
          name: 'John Doe',
          age: 35,
          gender: 'male',
          phone: '9876543210',
          email: 'john@example.com',
          bloodGroup: 'A+',
          emergencyContact: '9876543211',
          address: '123 Main St, City',
          appointmentDate: new Date().toISOString().split('T')[0],
          appointmentTime: '10:00',
          department: 'general',
          doctor: 'DR001',
          symptoms: 'Fever and cough',
          status: 'scheduled',
          createdAt: new Date().toISOString()
        },
        {
          id: 'PAT0002',
          name: 'Jane Smith',
          age: 28,
          gender: 'female',
          phone: '9876543212',
          email: 'jane@example.com',
          bloodGroup: 'O+',
          emergencyContact: '9876543213',
          address: '456 Oak Ave, Town',
          appointmentDate: new Date().toISOString().split('T')[0],
          appointmentTime: '14:30',
          department: 'cardiology',
          doctor: 'DR001',
          symptoms: 'Chest pain',
          status: 'scheduled',
          createdAt: new Date().toISOString()
        }
      ];
      
      // Add sample prescription data
      const samplePrescriptions = [
        {
          id: 'PRES001',
          patientId: 'PAT0001',
          patientName: 'John Doe',
          date: new Date().toISOString().split('T')[0],
          status: 'active',
          notes: 'Patient presents with fever and cough. Temperature: 101°F. Diagnosed with upper respiratory infection.',
          medicines: '1. Paracetamol 500mg - 1 tablet every 6 hours for 3 days\n2. Amoxicillin 500mg - 1 capsule twice daily for 7 days\n3. Steam inhalation - 3 times daily',
          doctorId: 'DR001',
          createdAt: new Date().toISOString()
        }
      ];
      
      // Add sample lab report data
      const sampleLabReports = [
        {
          id: 'LAB001',
          patientId: 'PAT0002',
          patientName: 'Jane Smith',
          date: new Date().toISOString().split('T')[0],
          status: 'pending',
          testType: 'blood-test',
          priority: 'urgent',
          notes: 'Complete blood count (CBC) required. Check for elevated white blood cell count. Also include cardiac enzyme tests due to chest pain symptoms.',
          doctorId: 'DR001',
          createdAt: new Date().toISOString()
        }
      ];
      
      localStorage.setItem('hospitalPatientData', JSON.stringify(samplePatients));
      localStorage.setItem('hospitalPrescriptionData', JSON.stringify(samplePrescriptions));
      localStorage.setItem('hospitalLabReportData', JSON.stringify(sampleLabReports));
      
      alert('Sample data added successfully! You can now open the doctor dashboard to test the functionality.');
    }
    
    function clearAllData() {
      if (confirm('Are you sure you want to clear all data? This will remove all patients, prescriptions, and lab reports.')) {
        localStorage.removeItem('hospitalPatientData');
        localStorage.removeItem('hospitalPrescriptionData');
        localStorage.removeItem('hospitalLabReportData');
        alert('All data cleared successfully!');
      }
    }
    
    function openDoctorDashboard() {
      window.open('pages/doctor_dashboard.html', '_blank');
    }
  </script>
</body>
</html> 